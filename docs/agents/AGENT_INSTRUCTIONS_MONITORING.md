# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è AI –∞–≥–µ–Ω—Ç–∞: –°–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

## –¶–µ–ª—å –∑–∞–¥–∞—á–∏

–°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, –∫–æ—Ç–æ—Ä—ã–π:
1. –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º (–Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é)
2. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
3. –õ–µ–≥–∫–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å –Ω–æ–≤—ã–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ —á–µ—Ä–µ–∑ –ø—Ä–æ—Å—Ç—ã–µ —à–∞–±–ª–æ–Ω—ã
4. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–¥–∏–Ω—ã–π —Å—Ç–µ–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (Prometheus, Grafana, Loki, Promtail, Portainer)

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –º—É–ª—å—Ç–∏–ø—Ä–æ–µ–∫—Ç–Ω–æ—Å—Ç–∏:

1. **–ï–¥–∏–Ω—ã–π —Å—Ç–µ–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞** - –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä Prometheus/Grafana/Loki –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ namespace `monitoring`
2. **–°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –∏–∑ –≤—Å–µ—Ö namespace** - Prometheus –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –∏–∑ –≤—Å–µ—Ö namespace —á–µ—Ä–µ–∑ ServiceMonitor
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –ª–æ–≥–æ–≤** - Promtail —Å–æ–±–∏—Ä–∞–µ—Ç –ª–æ–≥–∏ –∏–∑ –≤—Å–µ—Ö –ø–æ–¥–æ–≤ –≤–æ –≤—Å–µ—Ö namespace
4. **–ò–∑–æ–ª—è—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤** - –∫–∞–∂–¥—ã–π –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–µ—Ç —Å–≤–æ–∏ ServiceMonitor –≤ —Å–≤–æ–µ–º namespace –∏–ª–∏ –≤ namespace monitoring
5. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ labels** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ label `monitoring: enabled` –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Namespace: monitoring                                    ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ  ‚îÇ Prometheus ‚îÇ  ‚îÇ  Grafana   ‚îÇ  ‚îÇ    Loki    ‚îÇ        ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ
‚îÇ        ‚îÇ                                 ‚îÇ              ‚îÇ
‚îÇ        ‚îÇ –°–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏                ‚îÇ –°–æ–±–∏—Ä–∞–µ—Ç –ª–æ–≥–∏‚îÇ
‚îÇ        ‚îÇ –∏–∑ –≤—Å–µ—Ö namespace                ‚îÇ –∏–∑ –≤—Å–µ—Ö –ø–æ–¥–æ–≤‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                                 ‚îÇ
         ‚îÇ                                 ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Namespace: project1           ‚îÇ Namespace: project2‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ ‚îÇ ServiceMonitor   ‚îÇ          ‚îÇ ‚îÇ ServiceMonitor   ‚îÇ‚îÇ
‚îÇ ‚îÇ (project1-web)   ‚îÇ          ‚îÇ ‚îÇ (project2-web)  ‚îÇ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ ‚îÇ Service          ‚îÇ          ‚îÇ ‚îÇ Service          ‚îÇ‚îÇ
‚îÇ ‚îÇ (app: project1)  ‚îÇ          ‚îÇ ‚îÇ (app: project2)  ‚îÇ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

–°–æ–∑–¥–∞–π —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ñ–∞–π–ª–æ–≤ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π:

```
monitoring-stack/
‚îú‚îÄ‚îÄ README.md                          # –ì–ª–∞–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ setup.sh                       # –°–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–∞–∑–æ–≤–æ–≥–æ —Å—Ç–µ–∫–∞
‚îú‚îÄ‚îÄ values/                            # Helm values —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ prometheus-values.yaml         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Prometheus
‚îÇ   ‚îú‚îÄ‚îÄ loki-values.yaml               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Loki
‚îÇ   ‚îî‚îÄ‚îÄ portainer-values.yaml          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Portainer
‚îú‚îÄ‚îÄ base/                              # –ë–∞–∑–æ–≤—ã–µ Kubernetes –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ namespace.yaml                 # Namespace monitoring
‚îÇ   ‚îî‚îÄ‚îÄ kustomization.yaml             # Kustomize –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ templates/                         # –®–∞–±–ª–æ–Ω—ã –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ servicemonitor-template.yaml   # –®–∞–±–ª–æ–Ω ServiceMonitor
‚îÇ   ‚îú‚îÄ‚îÄ podmonitor-template.yaml       # –®–∞–±–ª–æ–Ω PodMonitor
‚îÇ   ‚îî‚îÄ‚îÄ grafana-dashboard-template.yaml # –®–∞–±–ª–æ–Ω Grafana Dashboard
‚îú‚îÄ‚îÄ examples/                          # –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ project-integration/
‚îÇ       ‚îú‚îÄ‚îÄ servicemonitor-example.yaml
‚îÇ       ‚îú‚îÄ‚îÄ README.md
‚îÇ       ‚îî‚îÄ‚îÄ integration-guide.md
‚îú‚îÄ‚îÄ scripts/                           # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ check-status.sh                # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
‚îÇ   ‚îî‚îÄ‚îÄ open-monitoring.sh             # –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
‚îî‚îÄ‚îÄ docs/                              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
    ‚îú‚îÄ‚îÄ installation.md                # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
    ‚îú‚îÄ‚îÄ project-integration.md         # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
    ‚îú‚îÄ‚îÄ troubleshooting.md            # –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
    ‚îî‚îÄ‚îÄ architecture.md               # –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
```

## –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (scripts/setup.sh)

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `scripts/setup.sh` –Ω–∞ –æ—Å–Ω–æ–≤–µ `k8s/scripts/setup-monitoring.sh`, –Ω–æ —Å–¥–µ–ª–∞–π –µ–≥–æ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º:

**–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
1. –£–±–µ—Ä–∏ –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (aistro)
2. –°–¥–µ–ª–∞–π –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. –î–æ–±–∞–≤—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Å—Ç–µ–∫–∞ (idempotent)
4. –ù–∞—Å—Ç—Ä–æ–π Prometheus –¥–ª—è —Å–±–æ—Ä–∞ –∏–∑ –≤—Å–µ—Ö namespace

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∫—Ä–∏–ø—Ç–∞:**
- `DOMAIN` - –±–∞–∑–æ–≤—ã–π –¥–æ–º–µ–Ω (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `MONITORING_NAMESPACE` - namespace –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: monitoring)
- `GRAFANA_PASSWORD` - –ø–∞—Ä–æ–ª—å Grafana (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: admin, –Ω–æ –Ω—É–∂–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–¥–∏—Ç—å –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏)
- `ACME_EMAIL` - email –¥–ª—è Let's Encrypt (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: admin@${DOMAIN})
- `PROMETHEUS_RETENTION` - –≤—Ä–µ–º—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 15d)
- `PROMETHEUS_STORAGE` - —Ä–∞–∑–º–µ—Ä —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ Prometheus (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 20Gi)
- `LOKI_RETENTION` - –≤—Ä–µ–º—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–≥–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 744h = 31 –¥–µ–Ω—å)
- `LOKI_STORAGE` - —Ä–∞–∑–º–µ—Ä —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ Loki (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 20Gi)

**–í–∞–∂–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Prometheus (–≤ prometheus-values.yaml):**
```yaml
prometheus:
  prometheusSpec:
    # –ö–†–ò–¢–ò–ß–ù–û: —Ä–∞–∑—Ä–µ—à–∞–µ–º —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –∏–∑ –≤—Å–µ—Ö namespace
    serviceMonitorSelectorNilUsesHelmValues: false
    podMonitorSelectorNilUsesHelmValues: false

    # ServiceMonitorNamespaceSelector - –∏–∑ –∫–∞–∫–∏—Ö namespace —Å–æ–±–∏—Ä–∞—Ç—å ServiceMonitor
    # {} –æ–∑–Ω–∞—á–∞–µ—Ç –≤—Å–µ namespace
    serviceMonitorNamespaceSelector: {}

    # –ò–ª–∏ –º–æ–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ label (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏):
    # serviceMonitorNamespaceSelector:
    #   matchLabels:
    #     monitoring: enabled

    retention: ${PROMETHEUS_RETENTION}
    storageSpec:
      volumeClaimTemplate:
        spec:
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: ${PROMETHEUS_STORAGE}
```

**–í–∞–∂–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Promtail (–≤ loki-values.yaml):**
```yaml
promtail:
  enabled: true
  config:
    scrapeConfigs:
      - job_name: kubernetes-pods
        kubernetes_sd_configs:
          - role: pod
        # –°–æ–±–∏—Ä–∞–µ—Ç –ª–æ–≥–∏ –∏–∑ –í–°–ï–• namespace –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
        relabel_configs:
          - action: replace
            source_labels:
              - __meta_kubernetes_namespace
            target_label: namespace
          # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```

## –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤

### templates/servicemonitor-template.yaml

–°–æ–∑–¥–∞–π —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —à–∞–±–ª–æ–Ω ServiceMonitor:

```yaml
---
# –®–∞–±–ª–æ–Ω ServiceMonitor –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É
#
# –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ:
# 1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
# 2. –ó–∞–º–µ–Ω–∏—Ç–µ –≤—Å–µ –≤—Ö–æ–∂–¥–µ–Ω–∏—è PROJECT_NAME –Ω–∞ –∏–º—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
# 3. –ó–∞–º–µ–Ω–∏—Ç–µ YOUR_PROJECT_NAMESPACE –Ω–∞ namespace –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
# 4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ selector.matchLabels –ø–æ–¥ –≤–∞—à–∏ Service labels
# 5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ endpoints –ø–æ–¥ –≤–∞—à–∏ –ø–æ—Ä—Ç—ã –∏ –ø—É—Ç–∏ –∫ –º–µ—Ç—Ä–∏–∫–∞–º
#
# –í–ê–ñ–ù–û: –í–∞—à Service –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å label "monitoring: enabled"
#
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: PROJECT_NAME-web-http      # –ò–∑–º–µ–Ω–∏—Ç–µ PROJECT_NAME
  namespace: YOUR_PROJECT_NAMESPACE # Namespace –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
  labels:
    app: PROJECT_NAME               # –ò–∑–º–µ–Ω–∏—Ç–µ
    monitoring: enabled             # –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π label –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
    project: PROJECT_NAME           # –î–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –≤ Grafana
spec:
  selector:
    matchLabels:
      app: PROJECT_NAME-web-http    # –î–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å Service
      monitoring: enabled            # –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π label
  # –í–∞—Ä–∏–∞–Ω—Ç 1: ServiceMonitor –≤ namespace –ø—Ä–æ–µ–∫—Ç–∞
  namespaceSelector:
    matchNames:
      - YOUR_PROJECT_NAMESPACE      # –£–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π namespace
  # –í–∞—Ä–∏–∞–Ω—Ç 2: ServiceMonitor –≤ namespace monitoring (—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
  # namespaceSelector:
  #   any: true                      # –ò–ª–∏ any: true –¥–ª—è –≤—Å–µ—Ö namespace
  endpoints:
  - port: http                      # –ò–º—è –ø–æ—Ä—Ç–∞ –≤ Service
    path: /metrics                  # –ü—É—Ç—å –∫ –º–µ—Ç—Ä–∏–∫–∞–º Prometheus
    interval: 30s
    scrapeTimeout: 10s
    # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –¥–ª—è –±–∞–∑–æ–≤–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
    # basicAuth:
    #   username:
    #     name: metrics-auth
    #     key: username
    #   password:
    #     name: metrics-auth
    #     key: password
```

### templates/podmonitor-template.yaml

–°–æ–∑–¥–∞–π —à–∞–±–ª–æ–Ω –¥–ª—è PodMonitor (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–¥–æ–≤ –Ω–∞–ø—Ä—è–º—É—é):

```yaml
---
# –®–∞–±–ª–æ–Ω PodMonitor –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–æ–¥–æ–≤ –Ω–∞–ø—Ä—è–º—É—é
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–≥–¥–∞ –Ω–µ—Ç Service –∏–ª–∏ –Ω—É–∂–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–æ–¥–æ–≤
#
apiVersion: monitoring.coreos.com/v1
kind: PodMonitor
metadata:
  name: PROJECT_NAME-pods
  namespace: YOUR_PROJECT_NAMESPACE
  labels:
    app: PROJECT_NAME
    monitoring: enabled
    project: PROJECT_NAME
spec:
  selector:
    matchLabels:
      app: PROJECT_NAME-web
      monitoring: enabled
  namespaceSelector:
    matchNames:
      - YOUR_PROJECT_NAMESPACE
  podMetricsEndpoints:
  - port: metrics
    path: /metrics
    interval: 30s
```

## –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### examples/project-integration/servicemonitor-example.yaml

–°–æ–∑–¥–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–∏–º–µ—Ä –¥–ª—è Django –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```yaml
---
# –ü—Ä–∏–º–µ—Ä: ServiceMonitor –¥–ª—è Django –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
# –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ Django —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ /metrics
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: myproject-web-http
  namespace: myproject
  labels:
    app: myproject
    monitoring: enabled
    project: myproject
spec:
  selector:
    matchLabels:
      app: myproject-web-http
      monitoring: enabled
  namespaceSelector:
    matchNames:
      - myproject
  endpoints:
  - port: http
    path: /metrics
    interval: 30s
    scrapeTimeout: 10s
```

### examples/project-integration/integration-guide.md

–°–æ–∑–¥–∞–π –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:

```markdown
# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ —Å —Å–∏—Å—Ç–µ–º–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –±–∞–∑–æ–≤—ã–π —Å—Ç–µ–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–≤—ã–ø–æ–ª–Ω–µ–Ω `./scripts/setup.sh`)
2. –í –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ –µ—Å—Ç—å —Å–µ—Ä–≤–∏—Å—ã —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ Prometheus
3. –£ –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–ª–∞—Å—Ç–µ—Ä—É Kubernetes

## –®–∞–≥–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 1. –î–æ–±–∞–≤—å—Ç–µ labels –∫ –≤–∞—à–∏–º Service

–í –≤–∞—à–µ–º Service –¥–æ–±–∞–≤—å—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ labels:

```yaml
apiVersion: v1
kind: Service
metadata:
  name: myapp-web
  namespace: myproject
  labels:
    app: myapp-web-http        # –î–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å selector –≤ ServiceMonitor
    monitoring: enabled         # –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!
    project: myproject          # –î–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
spec:
  ports:
  - name: http
    port: 80
    targetPort: 8000
```

### 2. –°–æ–∑–¥–∞–π—Ç–µ ServiceMonitor

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —à–∞–±–ª–æ–Ω –∏–∑ `monitoring-stack/templates/servicemonitor-template.yaml`
–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–¥ –≤–∞—à –ø—Ä–æ–µ–∫—Ç:

```yaml
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: myapp-web-http
  namespace: myproject  # –ò–ª–∏ monitoring –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
  labels:
    app: myapp
    monitoring: enabled
    project: myproject
spec:
  selector:
    matchLabels:
      app: myapp-web-http
      monitoring: enabled
  namespaceSelector:
    matchNames:
      - myproject
  endpoints:
  - port: http
    path: /metrics
    interval: 30s
```

### 3. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç

```bash
kubectl apply -f servicemonitor.yaml
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ ServiceMonitor —Å–æ–∑–¥–∞–Ω
kubectl get servicemonitor -n myproject

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Prometheus –≤–∏–¥–∏—Ç targets
kubectl port-forward -n monitoring svc/prometheus-kube-prometheus-prometheus 9090:9090
# –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:9090/targets
# –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –≤–∞—à —Å–µ—Ä–≤–∏—Å –≤ —Å–ø–∏—Å–∫–µ
```

## –ù–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ

–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –∏–∑ –≤—Å–µ—Ö namespace,
–≥–¥–µ –µ—Å—Ç—å ServiceMonitor —Å label `monitoring: enabled`.

**–ü—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–π—Ç–µ ServiceMonitor –≤ –∫–∞–∂–¥–æ–º –ø—Ä–æ–µ–∫—Ç–µ –ø–æ —à–∞–±–ª–æ–Ω—É –≤—ã—à–µ.**

Prometheus –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç –≤—Å–µ ServiceMonitor –≤–æ –≤—Å–µ—Ö namespace
(–±–ª–∞–≥–æ–¥–∞—Ä—è –Ω–∞—Å—Ç—Ä–æ–π–∫–µ `serviceMonitorNamespaceSelector: {}`).

## –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤ Grafana

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ label `namespace` –∏–ª–∏ `project` –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö PromQL:

```promql
# –ú–µ—Ç—Ä–∏–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
rate(http_requests_total{namespace="myproject"}[5m])

# –ú–µ—Ç—Ä–∏–∫–∏ –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
rate(http_requests_total[5m])

# –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º
sum by (project) (rate(http_requests_total[5m]))
```

## –õ–æ–≥–∏

–õ–æ–≥–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ –≤—Å–µ—Ö –ø–æ–¥–æ–≤ –≤–æ –≤—Å–µ—Ö namespace.
–§–∏–ª—å—Ç—Ä—É–π—Ç–µ –ø–æ label `namespace` –≤ Loki:

```logql
{namespace="myproject"}
```
```

## –®–∞–≥ 4: –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### README.md (–≥–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª)

–°–æ–∑–¥–∞–π –≥–ª–∞–≤–Ω—ã–π README —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º:
- –ß—Ç–æ —ç—Ç–æ –∑–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –°—Å—ã–ª–∫–∏ –Ω–∞ –¥–µ—Ç–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

### docs/installation.md

–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ:
- –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (Helm, kubectl)
- –ó–∞–ø—É—Å–∫ scripts/setup.sh
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS
- –ü–µ—Ä–≤—ã–π –≤—Ö–æ–¥ –≤ Grafana

### docs/project-integration.md

–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞:
- –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- Troubleshooting

### docs/troubleshooting.md

–†–µ—à–µ–Ω–∏–µ —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º:
- Prometheus –Ω–µ –≤–∏–¥–∏—Ç targets
- –ú–µ—Ç—Ä–∏–∫–∏ –Ω–µ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è
- –õ–æ–≥–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ Loki
- Grafana –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Prometheus
- –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏

## –®–∞–≥ 5: –ö–ª—é—á–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –º—É–ª—å—Ç–∏–ø—Ä–æ–µ–∫—Ç–Ω–æ—Å—Ç–∏

### –í scripts/setup.sh –ø—Ä–æ–≤–µ—Ä—å —Å–ª–µ–¥—É—é—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

1. **Prometheus values:**
   - `serviceMonitorSelectorNilUsesHelmValues: false` - –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!
   - `podMonitorSelectorNilUsesHelmValues: false` - –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!
   - `serviceMonitorNamespaceSelector: {}` - —Å–æ–±–∏—Ä–∞—Ç—å –∏–∑ –≤—Å–µ—Ö namespace

2. **Promtail config:**
   - `kubernetes_sd_configs: role: pod` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–¥–æ–≤
   - `relabel_configs` —Å `namespace` label - –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≤ Loki

3. **Grafana datasources:**
   - Prometheus –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –∫–∞–∫ `http://prometheus-kube-prometheus-prometheus:9090`
   - Loki –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –∫–∞–∫ `http://loki:3100`

## –®–∞–≥ 6: –°–æ–∑–¥–∞–Ω–∏–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤

### scripts/check-status.sh

–°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:

```bash
#!/bin/bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å—Ç–µ–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

NAMESPACE=${MONITORING_NAMESPACE:-monitoring}

echo "üìä Monitoring Stack Status"
echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–æ–≤
echo "Pods:"
kubectl get pods -n $NAMESPACE

# –ü—Ä–æ–≤–µ—Ä–∫–∞ ServiceMonitor
echo ""
echo "ServiceMonitors (all namespaces):"
kubectl get servicemonitor --all-namespaces

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Prometheus targets
echo ""
echo "Prometheus Targets:"
kubectl port-forward -n $NAMESPACE svc/prometheus-kube-prometheus-prometheus 9090:9090 &
PF_PID=$!
sleep 2
curl -s http://localhost:9090/api/v1/targets | jq '.data.activeTargets[] | {job: .labels.job, health: .health, lastError: .lastError}'
kill $PF_PID 2>/dev/null
```

### scripts/open-monitoring.sh

–°–∫—Ä–∏–ø—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ):

```bash
#!/bin/bash
# –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

DOMAIN=${DOMAIN:-example.com}
NAMESPACE=${MONITORING_NAMESPACE:-monitoring}

GRAFANA_URL="https://grafana.${DOMAIN}"
PROMETHEUS_URL="https://prometheus.${DOMAIN}"
PORTAINER_URL="https://portainer.${DOMAIN}"

echo "üìä Monitoring Services:"
echo "   Grafana:    ${GRAFANA_URL}"
echo "   Prometheus: ${PROMETHEUS_URL}"
echo "   Portainer:  ${PORTAINER_URL}"

# –û—Ç–∫—Ä—ã–≤–∞–µ–º –≤ –±—Ä–∞—É–∑–µ—Ä–µ
if [ "$1" == "open" ]; then
  xdg-open "$GRAFANA_URL" 2>/dev/null || open "$GRAFANA_URL" 2>/dev/null
fi
```

## –®–∞–≥ 7: –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è –¥–ª—è –∞–≥–µ–Ω—Ç–∞

### –ß—Ç–æ –ù–ï –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å:

1. ‚ùå –ù–ï –ø—Ä–∏–≤—è–∑—ã–≤–∞–π –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø—Ä–æ–µ–∫—Ç—É (aistro, myproject –∏ —Ç.–¥.)
2. ‚ùå –ù–ï —Ö–∞—Ä–¥–∫–æ–¥—å namespace –ø—Ä–æ–µ–∫—Ç–æ–≤
3. ‚ùå –ù–ï —Å–æ–∑–¥–∞–≤–∞–π —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ –¥–∞—à–±–æ—Ä–¥—ã –≤ –±–∞–∑–æ–≤–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–µ
4. ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–æ–º–µ–Ω—ã –≤ —à–∞–±–ª–æ–Ω–∞—Ö

### –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

1. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
2. ‚úÖ –°–æ–∑–¥–∞–≤–∞–π —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
3. ‚úÖ –î–æ–±–∞–≤–ª—è–π –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
4. ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π –≤—Å–µ —à–∞–≥–∏ –ø–æ–¥—Ä–æ–±–Ω–æ
5. ‚úÖ –î–µ–ª–∞–π —Å–∫—Ä–∏–ø—Ç—ã idempotent (–º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑)
6. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–π —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –º—É–ª—å—Ç–∏–ø—Ä–æ–µ–∫—Ç–Ω–æ—Å—Ç–∏:

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –ø—Ä–æ–≤–µ—Ä—å:
1. –ú–æ–∂–Ω–æ –ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–µ–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
2. –ú–æ–∂–Ω–æ –ª–∏ —Å–æ–∑–¥–∞—Ç—å ServiceMonitor –≤ namespace project1
3. –ú–æ–∂–Ω–æ –ª–∏ —Å–æ–∑–¥–∞—Ç—å ServiceMonitor –≤ namespace project2
4. Prometheus –≤–∏–¥–∏—Ç –æ–±–∞ ServiceMonitor
5. –õ–æ–≥–∏ –æ–±–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ Loki
6. –í Grafana –º–æ–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ namespace/project

## –®–∞–≥ 8: –ú–∏–≥—Ä–∞—Ü–∏—è –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å—Ç–µ–∫:

1. **–≠–∫—Å–ø–æ—Ä—Ç —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
   ```bash
   # –≠–∫—Å–ø–æ—Ä—Ç Helm values
   helm get values prometheus -n monitoring > values/prometheus-values.yaml
   helm get values loki -n monitoring > values/loki-values.yaml
   ```

2. **–£–¥–∞–ª–µ–Ω–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:**
   - –£–¥–∞–ª–∏ ServiceMonitor —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤
   - –£–¥–∞–ª–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥—ã Grafana
   - –û—Å—Ç–∞–≤—å —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–π —Å—Ç–µ–∫

3. **–°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤:**
   - –ü—Ä–µ–æ–±—Ä–∞–∑—É–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ ServiceMonitor –≤ —à–∞–±–ª–æ–Ω—ã
   - –î–æ–±–∞–≤—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

## –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç

- [ ] –°–æ–∑–¥–∞–Ω scripts/setup.sh —Å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- [ ] –°–æ–∑–¥–∞–Ω—ã Helm values —Ñ–∞–π–ª—ã —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –º—É–ª—å—Ç–∏–ø—Ä–æ–µ–∫—Ç–Ω–æ—Å—Ç–∏
- [ ] –°–æ–∑–¥–∞–Ω—ã —à–∞–±–ª–æ–Ω—ã ServiceMonitor –∏ PodMonitor
- [ ] –°–æ–∑–¥–∞–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- [ ] –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (README, installation, integration, troubleshooting)
- [ ] –°–æ–∑–¥–∞–Ω—ã –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
- [ ] –í—Å–µ —Ñ–∞–π–ª—ã –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç —É–ø–æ–º–∏–Ω–∞–Ω–∏–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
- [ ] Prometheus –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —Å–±–æ—Ä –∏–∑ –≤—Å–µ—Ö namespace
- [ ] Promtail –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —Å–±–æ—Ä –ª–æ–≥–æ–≤ –∏–∑ –≤—Å–µ—Ö –ø–æ–¥–æ–≤
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤–æ –≤—Å–µ —à–∞–±–ª–æ–Ω—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. **RBAC –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏:**
   - –°–æ–∑–¥–∞—Ç—å ServiceAccount –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
   - –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –º–µ—Ç—Ä–∏–∫–∞–º —á–µ—Ä–µ–∑ NetworkPolicy

2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ:**
   - –°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è ServiceMonitor
   - –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ —Å label `monitoring: enabled`

3. **–î–∞—à–±–æ—Ä–¥—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:**
   - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥—ã –¥–ª—è Kubernetes
   - –®–∞–±–ª–æ–Ω—ã –¥–∞—à–±–æ—Ä–¥–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

4. **–ê–ª–µ—Ä—Ç—ã:**
   - –ë–∞–∑–æ–≤—ã–µ –∞–ª–µ—Ä—Ç—ã –¥–ª—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
   - –®–∞–±–ª–æ–Ω—ã –∞–ª–µ—Ä—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤

5. **Backup:**
   - –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –±—ç–∫–∞–ø–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Grafana
   - –≠–∫—Å–ø–æ—Ä—Ç –¥–∞—à–±–æ—Ä–¥–æ–≤

---

**–í–∞–∂–Ω–æ:** –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –∫–æ—Ä–Ω–µ –Ω–æ–≤–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —Å–ª—É–∂–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π –¥–ª—è AI –∞–≥–µ–Ω—Ç–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–µ —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.
